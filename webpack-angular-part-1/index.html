<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Webpack &amp; Angular: Part 1</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Webpack &amp; Angular: Part 1">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="http://mark-read.info"> <!-- Change this to your URL -->
<meta name="twitter:creator" content="@MarkReadM"> <!-- Change this to your Twitter Handel -->
    <meta name="google-site-verification" content="">
    <meta property="fb:admins" content="">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Webpack &amp; Angular: Part 1">
    <meta property="og:description" content="">

    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../assets/js/styles/obsidian.css?v=883d80c943">
    <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="../assets/css/main.css?v=883d80c943" />
    <link rel="stylesheet" type="text/css" media="print" href="../assets/css/print.css?v=883d80c943" />
	<link rel="stylesheet" type="text/css" media="print" href="../assets/css/prism.css?v=883d80c943" />
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <link rel="canonical" href="index.html" />
    
    <meta property="og:site_name" content="ShMcK" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Webpack &amp; Angular: Part 1" />
    <meta property="og:description" content="Part 1 Getting Started There are a lot of module loaders out there: Require.js, JSPM using System.js, to name a few.  Eventually the JavaScript community will come around and land on a winning module loader. My guess is..." />
    <meta property="og:url" content="http://localhost:2368/webpack-angular-part-1/" />
    <meta property="og:image" content="http://localhost:2368/content/images/2015/04/webpackAngular-1.png" />
    <meta property="article:published_time" content="2015-04-15T02:37:06.558Z" />
    <meta property="article:modified_time" content="2015-04-18T14:48:38.200Z" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Webpack &amp; Angular: Part 1" />
    <meta name="twitter:description" content="Part 1 Getting Started There are a lot of module loaders out there: Require.js, JSPM using System.js, to name a few.  Eventually the JavaScript community will come around and land on a winning module loader. My guess is..." />
    <meta name="twitter:url" content="http://localhost:2368/webpack-angular-part-1/" />
    <meta name="twitter:image:src" content="http://localhost:2368/content/images/2015/04/webpackAngular-1.png" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "ShMcK",
    "author": {
        "@type": "Person",
        "name": "Shawn McKay",
        "image": "http://localhost:2368/content/images/2015/02/header-shawn-2.png",
        "url": "http://localhost:2368/author/shmck",
        "sameAs": null,
        "description": null
    },
    "headline": "Webpack &amp; Angular: Part 1",
    "url": "http://localhost:2368/webpack-angular-part-1/",
    "datePublished": "2015-04-15T02:37:06.558Z",
    "dateModified": "2015-04-18T14:48:38.200Z",
    "image": "http://localhost:2368/content/images/2015/04/webpackAngular-1.png",
    "description": "Part 1 Getting Started There are a lot of module loaders out there: Require.js, JSPM using System.js, to name a few.  Eventually the JavaScript community will come around and land on a winning module loader. My guess is..."
}
    </script>

    <meta name="generator" content="Ghost 0.6" />
    <link rel="alternate" type="application/rss+xml" title="ShMcK" href="../rss/index.html" />
</head>
<body class="post-template">

    <a href="../index.html" class="logo-readium"><span class="logo" style="background-image: url(../content/images/2015/03/logo-mountain.png)"></span></a>
    

<main class="content" role="main">

    <article class="post">



        <div class="noarticleimage">
            <div class="post-meta">
                <h1 class="post-title">Webpack &amp; Angular: Part 1</h1>
                <div class="cf post-meta-text">
                    <div class="author-image" style="background-image: url(../content/images/2015/02/header-shawn-2.png)">Blog Logo</div>
                    <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="../author/shmck/index.html">Shawn McKay</a></h4> on
                    <time datetime="2015-04-15">15 Apr 2015</time>, tagged on 
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>



            <section class="post-content">
                <div class="post-reading">
                    <span class="post-reading-time"></span> read
                </div>
                <a name="topofpage"></a>
                <h5 id="part1">Part 1</h5>

<h1 id="gettingstarted">Getting Started</h1>

<p>There are a lot of module loaders out there: Require.js, JSPM using System.js, to name a few. </p>

<p>Eventually the JavaScript community will come around and land on a winning module loader. My guess is Webpack, or something very similar. </p>

<p>Go with Webpack. Webpack provides an elegant and multi-featured approach to module loading. It does everything I wanted it to do, and more. Really, a lot more. </p>

<p>Let's try it out. We'll setup a project using Webpack, including ES6 transpiling &amp; Sass loading. In this example, we'll setup an Angular based project using Webpack.</p>

<p><img src="../content/images/2015/04/webpackAngular.png" alt="Webpack &amp; Angular" /></p>

<p>Free free to load the <a href="https://github.com/ShMcK/WebpackAngularDemos/tree/master/Part1">basic project from Github</a>.</p>

<h2 id="filesetup">File Setup</h2>

<p>File Structure:</p>

<pre><code>root  
├── app
│   ├── bower_components
│   ├── core
│   │       ├──bootstrap.js
│   │       └──vendor.js
│   │
│   ├── index.html
│   ├── index.scss
│   └──index.js
├── .jshintrc
├── node_modules
└── package.json
</code></pre>

<p>This should be the bare minimum required to check if everything is working.</p>

<p>/app/index.html</p>

<pre><code class="language-markup">&lt;!doctype html&gt;  
&lt;html lang="en"&gt;  
&lt;head&gt;  
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Webpack &amp; Angular&lt;/title&gt;
&lt;/head&gt;  
&lt;body&gt;  
&lt;p&gt;Angular is working: {{1 + 1 === 2}}&lt;/p&gt;  
&lt;script src="bundle.js"&gt;&lt;/script&gt;  
&lt;/body&gt;  
&lt;/html&gt;  
</code></pre>

<p>/app/index.js</p>

<pre><code class="language-js">alert('loaded!');  
</code></pre>

<h2 id="webpack">Webpack</h2>

<h3 id="setup">Setup</h3>

<p>Let's create a <code>package.json</code> file to get started.</p>

<pre><code class="language-shell">npm init  
</code></pre>

<p>Agree to whatever defaults.</p>

<p>We're going to need a few basic dev-dependencies to get started with webpack.</p>

<pre><code class="language-shell">npm install -D webpack  
</code></pre>

<p>Webpack will also require a <a href="http://webpack.github.io/docs/configuration.html">webpack configuration file</a>: <code>webpack.config.js</code>. Make the file and add the following:</p>

<p>/webpack.config.js</p>

<pre><code class="language-js">'use strict';  
var webpack = require('webpack'),  
path = require('path');  
// PATHS
var PATHS = {  
  app: __dirname + '/app',
  bower: __dirname + '/app/bower_components'
};
module.exports = {  
    // config goes here
};
</code></pre>

<p>Webpack is a lot easier than it looks. You just need to provide an <code>entry</code> and an <code>output</code>. </p>

<p>Notice <code>bundle.js</code> is the only script we needed to load in our <code>index.html</code>. Everything will go into that bundle. </p>

<p>Later you can have multiple bundles for easy lazy-loading and code-splitting.</p>

<p>/webpack.config.js</p>

<pre><code class="language-js">module.exports = {  
    context: PATHS.app,
     entry: {
           app: './index.js'
    },
    output: {
        path: PATHS.app,
        filename: 'bundle.js'
    }
}
</code></pre>

<p>We now have a module loader. </p>

<p>Let's build our bundle in the terminal.</p>

<pre><code class="language-shell">webpack  
</code></pre>

<p>This should create the <code>app/bundle.js</code> file. Check it out. It's mostly a bunch of <code>webpack__require</code> statements.</p>

<h3 id="webpackdevserver">Webpack-Dev-Server</h3>

<p><a href="http://webpack.github.io/docs/webpack-dev-server.html">Webpack-dev-server</a> is a quick and easy Node.js/Express/Socket.io app that creates your <code>bundle.js</code> file on the fly and reloads it on changes. </p>

<p>Install it as a dev-dependency. </p>

<pre><code class="language-shell">npm install -D webpack-dev-server  
</code></pre>

<p>But wait, there's more!</p>

<h3 id="hotmode">Hot Mode</h3>

<p>Hot mode = live-reload of modules. No need to reload the entire project on every change, just load what changed. It makes sense and it's awesome.</p>

<p>It's not much work either. Update your webpack.config file.</p>

<p>/webpack.config.js</p>

<pre><code class="language-js">entry: {  
    app: ['webpack/hot/dev-server', './index.js']
  }
</code></pre>

<p>You may want to install <code>webpack-dev-server</code> globally. Otherwise you'll have to run it the long way: <code>node node_modules/.bin/webpack-dev-server --content-base app/ --hot</code></p>

<p>Run it.</p>

<pre><code class="language-shell">npm install -g webpack-dev-server  
webpack-dev-server --content-base app/ --hot  
</code></pre>

<p>Open up <code>http://localhost:8080/webpack-dev-server/</code>. </p>

<p>It's hot. </p>

<p>/app/index.js</p>

<pre><code class="language-js">alert('hot-loaded!');  
</code></pre>

<p>It updates amazingly fast. Again, unlike Gulp or Grunt, Webpack only needs to re-compile the module that changed. </p>

<p>Targeted reloading might not be important to you now, but as your project grows in size &amp; complexity it becomes increasingly useful.</p>

<h3 id="quickstart">Quick Start</h3>

<p>If you're used to using Gulp or Grunt, you probably like the time saving <code>gulp serve</code>, <code>grunt serve</code> shortcuts for running your app.</p>

<p>This can be accomplished with <code>package.json</code> <a href="https://docs.npmjs.com/misc/scripts">scripts</a>. </p>

<p>/package.json </p>

<pre><code class="language-json">"scripts": {
    "start": "webpack-dev-server --content-base app --hot"
  }
</code></pre>

<p>Now run <code>npm start</code>. Again, the app can be found at <code>localhost:8080/</code> by default, or <code>localhost:8080/webpack-dev-server</code> for the hot-module version.</p>

<h4 id="bootstrapangular">Bootstrap Angular</h4>

<p>I like to bootstrap Angular, rather than adding <code>ng-app="app"</code> into the html. </p>

<p>/app/core/bootstrap.js</p>

<pre><code class="language-js">/*jshint browser:true */
'use strict';  
// load Angular
require('angular');  
// load the main app file
var appModule = require('../index');  
// replaces ng-app="appName"
angular.element(document).ready(function () {  
  angular.bootstrap(document, [appModule.name], {
    //strictDi: true
  });
});
</code></pre>

<p>Notice <code>require('angular')</code>? That replaces adding <code>&lt;script src="bower_components/angular/angular.min.js"&gt;</code>. No need for that, this is a module system.</p>

<p>Also note that <code>appModule.name</code> will be taken from <code>index.js</code>, whatever its name might be: <code>angular.module('THISNAMEHERE', [])</code>.</p>

<p>Make the app file: <code>index.js</code>.</p>

<p>/app/index.js</p>

<pre><code class="language-js">module.exports = angular.module('app', []);  
</code></pre>

<p>Finally, let's make <code>bootstrap.js</code> our new Webpack entry point.</p>

<p>/webpack.config.js</p>

<pre><code class="language-js">entry: {  
    app: ['webpack/hot/dev-server', './core/bootstrap.js']
  }
</code></pre>

<p>Run the app (<code>npm start</code>). If all went well, running the app you should see: "Angular is working: true" at <code>localhost:8080</code> or <code>localhost:8080/webpack-dev-server</code>.</p>

<h4 id="adddependencies">Add Dependencies</h4>

<p>Install angular.</p>

<p><code>npm install --save angular</code></p>

<p>Bootstrap will get messy if we keep loading all our dependencies in there. Let's load them in a separate file called <code>vendor.js</code>.</p>

<p>/app/core/bootstrap.js</p>

<pre><code class="language-js">require(./vendor')();                    // run an empty function  
var appModule = require('../index');  
</code></pre>

<p>/app/core/vendor.js</p>

<pre><code class="language-js">module.exports = function () {  
    /* JS */
    require('angular');
};
</code></pre>

<p>This file will get longer later.</p>

<h4 id="styles">Styles</h4>

<p>Webpack doesn't just load JavaScript, it can load nearly anything we might need: styles, images, fonts, etc. </p>

<p>It handles these different file formats using <a href="http://webpack.github.io/docs/using-loaders.html">loaders</a>. Here's <a href="http://webpack.github.io/docs/list-of-loaders.html">a list of available loaders</a>.</p>

<p>Let's start with the Style, CSS, and Sass loaders and install them as dev-dependencies.</p>

<pre><code class="language-shell">npm install -D style-loader css-loader sass-loader`  
</code></pre>

<p>Webpack can use a Regex test to determine which loader to use. Add this to your webpack.config.js file.</p>

<p>/webpack.config.js</p>

<pre><code class="language-js">module.exports = {  
/* context, entry, output */
 module: {
    loaders: [
      {
        test: /\.scss$/,
        loader: 'style!css!sass'
      }
    ]
  }
 };
</code></pre>

<p>Loaders process from right to left. Meaning that if a <code>.scss</code> file is required as in the example, it will follow this order: sass loader => css loader => style loader</p>

<p>Run a quick test with a style sheet.</p>

<p>/app/index.scss</p>

<pre><code class="language-scss">body {  
    background-color: red;
}
</code></pre>

<p>Require the file.</p>

<p>/app/core/vendor.js</p>

<pre><code class="language-js">module.exports = {  
    /* Styles */
      require('../index.scss');
  /* JS */
  require('angular');
 }
</code></pre>

<p>Take a look, <code>npm start</code>, the background should now be red. </p>

<h4 id="es6loaders">ES6 Loaders</h4>

<p>Webpack makes it easy to use compiled languages like ES6, TypeScript, CoffeeScript, etc. Let's write our app in ES6 and compile it to ES5/ES3. </p>

<p>First we need some loaders. Install the dev-dependencies:</p>

<p><code>npm install -D jshint-loader babel-loader ng-annotate-loader</code></p>

<p>As before, we provide a loader object with a pattern matching test case. We'll exclude compiling packages.</p>

<p>/webpack.config.js</p>

<pre><code class="language-js">loaders: [  
{
    test: /\.js$/,
   loader: 'ng-annotate!babel!jshint',
   exclude: /node_modules|bower_components/
}
]
</code></pre>

<p>Webpack will take any required <code>.js</code> files, and run them right to left: jshint => babel => ng-annotate.</p>

<p>Let's use an ES6 example to make sure everything is working.</p>

<p>/app/index.js</p>

<pre><code class="language-js">module.exports = angular.module('app', []);  
// default params
function printMessage (status='working') {  
// let
  let message = 'ES6';                    
// template string           
  console.log(`${message} is ${status}`);    
}
printMessage();  
</code></pre>

<p>Run the app, <code>npm start</code>, and you should see "ES6 is working" in the console.</p>

<h4 id="removingjshinterrors">Removing JSHint Errors</h4>

<p>You probably saw some warnings (in yellow) when you ran the app.</p>

<p>You might want to remove these warnings from the console caused by jshint using a <code>.jshintrc</code> file. You can take <a href="https://github.com/johnpapa/angular-styleguide#js-hint">Jon Papa's recommended .jshintrc</a> or add the following:</p>

<p>/.jshintrc</p>

<pre><code class="language-json">{
  "esnext": true,
  "node": true,
  "globals": {
    "angular": true,
    "console": true
  }
}
</code></pre>

<h2 id="conclusion">Conclusion</h2>

<p>When I made my first webpack app, I was left wondering:</p>

<blockquote>
  <p>What happened to the build stage?</p>
  
  <p>Where's the heavy lifting we need Grunt/Gulp for? </p>
</blockquote>

<p>But it's all in the few lines of code in that webpack.config file. The app is built everytime you run <code>webpack</code>, and built and updated on the fly when you run the <code>webpack-dev-server</code>. </p>

<p>Everything goes in the bundle.js. It fits my criteria for a good module loader: it's simple and it works.</p>

<p>Granted, this was a simple use case. We'll look at how Webpack handles more complicated cases in the <a href="http://shmck.com/webpack-angular-part-2">next post</a>, as we setup a project requiring <a href="http://ui.lumapps.com/">LumX</a>, a popular Material Design based CSS Framework for Angular.</p>
            </section>
            <footer class="post-footer">
                <section class="share">
                    <a class="icon-twitter" href="http://twitter.com/share?text=Webpack%20%26%20Angular%3A%20Part%201&url=http://localhost:2368/webpack-angular-part-1/"
                        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                        <span class="hidden">Twitter</span>
                    </a>
                    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/webpack-angular-part-1/"
                        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                        <span class="hidden">Facebook</span>
                    </a>
                    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/webpack-angular-part-1/"
                       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                        <span class="hidden">Google+</span>
                    </a>
                </section>
            </footer>
                        <div class="bottom-teaser cf">
                <div class="isLeft">
                    <h5 class="index-headline featured"><span>Written by</span></h5>
                    <section class="author">
                        <div class="author-image" style="background-image: url(../content/images/2015/02/header-shawn-2.png)">Blog Logo</div>
                        <h4><a href="../author/shmck/index.html">Shawn McKay</a></h4>
                        <p class="bio"></p>
                        <hr>
                        <p class="published">Published <time datetime="2015-04-15">15 Apr 2015</time></p>
                    </section>
                </div>
            </div>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'shmck'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<div class="bottom-closer">
    <div class="background-closer-image" style="background-image: url(../content/images/2015/03/Mountain-short-dark.jpg)">
        Image
    </div>
    <div class="inner">
        <h1 class="blog-title">ShMcK</h1>
        <h2 class="blog-description">JavaScript Web Dev in Korea</h2>
        <a href="../index.html" class="btn">Back to Overview</a>
    </div>
</div>
</main>


    <script src="../public/jquery.js?v=883d80c943"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=883d80c943"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=883d80c943"></script>
    <script src="../assets/js/readingTime.min.js?v=883d80c943"></script>
    <script src="../assets/js/prism.js?v=883d80c943"></script>
    <script src="../assets/js/highlight.pack.js?v=883d80c943"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <script>
        
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-44377274-2');
      ga('send', 'pageview');
    
    </script>

</body>
</html>
