<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Webpack &amp; Angular: Part 3</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Webpack &amp; Angular: Part 3">
    <meta name="twitter:description" content="">
    <meta name="twitter:site" content="http://mark-read.info"> <!-- Change this to your URL -->
<meta name="twitter:creator" content="@MarkReadM"> <!-- Change this to your Twitter Handel -->
    <meta name="google-site-verification" content="">
    <meta property="fb:admins" content="">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Webpack &amp; Angular: Part 3">
    <meta property="og:description" content="">

    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../assets/js/styles/obsidian.css?v=f842645982">
    <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="../assets/css/main.css?v=f842645982" />
    <link rel="stylesheet" type="text/css" media="print" href="../assets/css/print.css?v=f842645982" />
	<link rel="stylesheet" type="text/css" media="print" href="../assets/css/prism.css?v=f842645982" />
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <link rel="canonical" href="index.html" />
    
    <meta property="og:site_name" content="ShMcK" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Webpack &amp; Angular: Part 3" />
    <meta property="og:description" content="Part 3 6 Ways to use Webpack Require with Angular For some reason, Webpack &amp;amp; Angular reminds me of late 90s Acne commercials.   It keeps your code: clean, clear &amp;amp; under control What a terrible way to start a blog..." />
    <meta property="og:url" content="http://localhost:2368/webpack-angular-part-3/" />
    <meta property="og:image" content="http://localhost:2368/content/images/2015/04/webpackAngular-2.png" />
    <meta property="article:published_time" content="2015-04-15T02:37:27.243Z" />
    <meta property="article:modified_time" content="2015-04-18T23:09:36.281Z" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Webpack &amp; Angular: Part 3" />
    <meta name="twitter:description" content="Part 3 6 Ways to use Webpack Require with Angular For some reason, Webpack &amp;amp; Angular reminds me of late 90s Acne commercials.   It keeps your code: clean, clear &amp;amp; under control What a terrible way to start a blog..." />
    <meta name="twitter:url" content="http://localhost:2368/webpack-angular-part-3/" />
    <meta name="twitter:image:src" content="http://localhost:2368/content/images/2015/04/webpackAngular-2.png" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "ShMcK",
    "author": {
        "@type": "Person",
        "name": "Shawn McKay",
        "image": "http://localhost:2368/content/images/2015/02/header-shawn-2.png",
        "url": "http://localhost:2368/author/shmck",
        "sameAs": null,
        "description": null
    },
    "headline": "Webpack &amp; Angular: Part 3",
    "url": "http://localhost:2368/webpack-angular-part-3/",
    "datePublished": "2015-04-15T02:37:27.243Z",
    "dateModified": "2015-04-18T23:09:36.281Z",
    "image": "http://localhost:2368/content/images/2015/04/webpackAngular-2.png",
    "description": "Part 3 6 Ways to use Webpack Require with Angular For some reason, Webpack &amp;amp; Angular reminds me of late 90s Acne commercials.   It keeps your code: clean, clear &amp;amp; under control What a terrible way to start a blog..."
}
    </script>

    <meta name="generator" content="Ghost 0.6" />
    <link rel="alternate" type="application/rss+xml" title="ShMcK" href="../rss/index.html" />
</head>
<body class="post-template">

    <a href="../index.html" class="logo-readium"><span class="logo" style="background-image: url(../content/images/2015/03/logo-mountain.png)"></span></a>
    

<main class="content" role="main">

    <article class="post">



        <div class="noarticleimage">
            <div class="post-meta">
                <h1 class="post-title">Webpack &amp; Angular: Part 3</h1>
                <div class="cf post-meta-text">
                    <div class="author-image" style="background-image: url(../content/images/2015/02/header-shawn-2.png)">Blog Logo</div>
                    <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="../author/shmck/index.html">Shawn McKay</a></h4> on
                    <time datetime="2015-04-15">15 Apr 2015</time>, tagged on 
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>



            <section class="post-content">
                <div class="post-reading">
                    <span class="post-reading-time"></span> read
                </div>
                <a name="topofpage"></a>
                <h5 id="part3">Part 3</h5>

<h1 id="6waystousewebpackrequirewithangular">6 Ways to use Webpack Require with Angular</h1>

<p><img src="../content/images/2015/04/webpackAngular.png" alt="Webpack &amp; Angular" /></p>

<p>For some reason, Webpack &amp; Angular reminds me of late 90s Acne commercials.</p>

<blockquote>
  <p>It keeps your code: clean, clear &amp; under control</p>
</blockquote>

<p>What a terrible way to start a blog post, but I'll stick with it. No regrets.</p>

<p>In <a href="http://shmck.com/webpack-angular-part-1">Part 1</a> &amp; <a href="http://shmck.com/webpack-angular-part-2">Part 2</a> we prepared setting up the project, all for this moment. Let's take advantage of using Webpack &amp; Angular for creating modular code.</p>

<h2 id="whatisrequired">What is Required</h2>

<p>In this demo we'll keep it simple and make a navbar directive, looking at the different ways of using <code>require</code>. </p>

<h3 id="1requiremodulename">1. require('module').name</h3>

<p>First of all, we'll need a module for handling our layout directives.</p>

<p>/app/core/layout.js</p>

<pre><code class="language-js">export default angular.module('app.layout', [])  
</code></pre>

<p>We can simply require the layout by its <code>(path).name</code>, allowing us to change module names at any time. <br />
Just make the loaded module a dependency.</p>

<p>/app/index.js</p>

<pre><code class="language-js">module.exports = angular.module('app', [  
  /* 3rd party */
  'lumx',
  /* modules */
  require('./core/layout').name
]);
</code></pre>

<h3 id="2modulardirectivenames">2. Modular Directive Names</h3>

<p>This makes it easy to change directive names in separate files with ease.</p>

<p>Let's start by setting up the navbar template.</p>

<p>/app/core/nav/nav.html</p>

<pre><code class="language-html">&lt;header class="header bgc-light-blue-600" ng-cloak&gt;  
&lt;!-- Get the app info and put it in the navbar on the left --&gt;  
  &lt;h1 class="main-logo"&gt;
    &lt;a href="/" class="main-logo__link" lx-ripple="white"&gt;
      &lt;span class="main-nav--title"&gt;{{::nav.app.title}} &lt;/span&gt;
      &lt;span class="main-nav--version"&gt;v{{::nav.app.version}}&lt;/span&gt;
    &lt;/a&gt;
  &lt;/h1&gt;
&lt;!-- Loop over the links and add them to the navbar on the right --&gt;  
  &lt;nav class="main-nav main-nav--lap-and-up"&gt;
    &lt;ul&gt;
      &lt;li ng-repeat="n in nav.app.links"&gt;
        &lt;a href="{{::n.link}}" class="main-nav__link" lx-ripple="white"&gt;
          {{::n.text}}&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/nav&gt;
&lt;/header&gt;  
</code></pre>

<p>Add some style: </p>

<p>/app/core/nav/nav.scss</p>

<pre><code class="language-scss">.header {
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  z-index: 999;
  height: 60px;
  padding: 12px;
  color: white;
  background-color: #4fc1e9;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}
</code></pre>

<p>For the full <code>nav.scss</code> file, get it on <a href="https://github.com/ShMcK/WebpackAngularDemos/blob/master/Part3/app/core/nav/nav.scss">Github</a>. This is a short/ugly version.</p>

<p>Next add the directive &amp; controller. Don't be confused, in this case my controller uses ES6 classes.</p>

<p>/app/core/nav/nav.js</p>

<pre><code class="language-js">class NavCtrl {  
  constructor() {
    this.app = {
      title: 'Module Loaders',
      version: '0.3.0',
      links: [{
        text: 'Webpack',
        link: 'http://webpack.github.io'
      }, {
        text: 'Require.js',
        link: 'http://requirejs.org/'
      }, {
        text: 'Jspm',
        link: 'http://jspm.io/'
      }]
    };
  }
}
export default () =&gt; {  
  require('./nav.scss');  // load styles for the component
  return {
    controller: NavCtrl,
    controllerAs: 'nav',
    templateUrl: './core/nav/nav.html'
  };
};
</code></pre>

<p>Notice the directive was never named. You really only need to name it once, on its angular.module.</p>

<p>/app/core/layout.js</p>

<pre><code class="language-js">export default angular.module('app.layout', [])  
  .directive('lumxNavbar', require('./nav/nav'));
</code></pre>

<p>This way, name changes remain very flexible even between files. </p>

<p>Add the directive to <code>index.html</code> and you should be able to see our working navbar.</p>

<p>/app/index.html</p>

<pre><code class="language-html">&lt;body&gt;  
&lt;lumx-navbar&gt;&lt;/lumx-navbar&gt;  
&lt;!-- ... --&gt;  
</code></pre>

<p>Nice!</p>

<h3 id="3requiretemplates">3. require(templates)</h3>

<p>This <code>lumxNavbar</code> templateUrl doesn't allow us to move things around very much. And the path is already getting long: <code>app/core/nav/nav.html</code>.</p>

<p>We can simplify this with the <a href="https://github.com/webpack/raw-loader"><code>raw-loader</code></a>. Install it as a dev dependency.</p>

<p><code>npm install -D raw-loader</code></p>

<p>Add another loader to our <code>app/webpack.config.js</code> file.</p>

<pre><code class="language-js">{
    test: /\.html/,
    loader: 'raw'
}
</code></pre>

<p>Note: Restart the webpack-dev-server for any config changes to take effect. <br />
And now we can require html files using relative paths, this makes it much easier to move folders around.</p>

<p>/app/core/nav/nav.js</p>

<pre><code class="language-js">/* old templateUrl: './core/nav/nav.html' */
template: require('./nav.html')  
</code></pre>

<h3 id="4requirejson">4. require(json)</h3>

<p>By now you're probably getting the hang of loaders. Just to be sure, let's load some json, get the <a href="https://github.com/webpack/json-loader"><code>json-loader</code></a>.</p>

<p><code>npm install -D json-loader</code></p>

<p>Add it to the <code>webpack.config.js</code>.</p>

<p>//webpack.config.js</p>

<pre><code class="language-js">{
    test: /\.json/,
    loader: 'json'
}
</code></pre>

<p>We can put all of our main data into an <code>index.json</code> file, so when we make frequent navbar changes in the future, we won't have to dive into the nested <code>/app/core/nav/nav</code>.</p>

<p>/app/index.json</p>

<pre><code class="language-json">{
  "title": "Module Loaders",
  "version": "0.3.0",
  "links": [{
    "text": "Webpack",
    "link": "http://webpack.github.io"
  }, {
    "text": "Require.js",
    "link": "http://requirejs.org/"
  }, {
    "text": "Jspm",
    "link": "http://jspm.io/"
  }]
}
</code></pre>

<p>Let's require this file in <code>nav.js</code></p>

<p>/app/core/nav/nav.js</p>

<pre><code class="language-js">class NavCtrl {  
  constructor() {
    this.app = require('../../index.json');
  }
}
</code></pre>

<p>But what if we move the <code>nav</code> folder around? Wouldn't an absolute path to <code>app/index.json</code> be more useful?</p>

<p>Luckily, with webpack we can use both.</p>

<h3 id="5requireabsoluterelativepaths">5. require(absolute &amp; || relative paths)</h3>

<p>A relative path points to files relative to the current directory.  </p>

<pre><code>parent.js  
├── file.js
│   ├── folder
│   │       └──child.js
</code></pre>

<ul>
<li>Parent <code>../parent.js</code></li>
<li>At the same level <code>./file.js</code></li>
<li>Nested <code>./folder/child.js</code></li>
</ul>

<p>But if you want to move the <code>folder</code> or <code>child.js</code> around, the path will break. </p>

<p>Sometimes a relative path is best, but other times it's better to use an absolute path.</p>

<p>To use absolute paths with Webpack, we must first tell <code>webpack.config</code> our absolute root.</p>

<p>/app/webpack.config.js</p>

<pre><code class="language-js">module.exports = {  
  /* ... */
  resolve: {
    root: __dirname + '/app'
  }
};
</code></pre>

<p>Now we can point to our <code>index.json</code> file in a much cleaner way. <br />
Note: Again, you'll have to restart the webpack-dev-server for any config changes to take effect. </p>

<pre><code class="language-js">class NavCtrl {  
  constructor() {
    /* old this.app = require('../../index.json'); */
    this.app = require('index.json');
  }
}
</code></pre>

<h3 id="6ifconditionrequiremodule">6. if (condition) { require('module') }</h3>

<p>Say we want to run some angular optimizations, but only during production. Normally this would require a separate code base, but with Webpack we can nest modules within if statements.</p>

<p>For example, with ES6 modules, we can only <code>import</code> files at the top of the file. They cannot be wrapped in any blocks. Webpack's require is much more flexible.</p>

<p>The goal: if (mode === production) { load production optimizations }.</p>

<p>/app/core/config/production.js</p>

<pre><code class="language-js">export default (appModule) =&gt; {  
  appModule.config(($compileProvider, $httpProvider) =&gt; {
    /* less watchers from console debugging: https://docs.angularjs.org/guide/production */
    $compileProvider.debugInfoEnabled(false); 
    /* process multiple responses @ same time: https://docs.angularjs.org/api/ng/provider/$httpProvider */
    $httpProvider.useApplyAsync(true);
  });
};
</code></pre>

<p>Here we're loading the root <code>appModule</code> and providing it with some config optimizations.</p>

<p>Let's put in an if(){} statement to load <code>production.js</code> only when we are using production mode.</p>

<p>/app/core/bootstrap.js</p>

<pre><code class="language-js">require('./vendor.js')();  
var appModule = require('../index');  
if (MODE.production) { // jshint ignore:line  
  require('./config/production')(appModule);
}
angular.element(document).ready(() =&gt; {  
  angular.bootstrap(document, [appModule.name], {
    //strictDi: true
  });
});
</code></pre>

<p>Notice a few optimizations using MODE.production. But where does MODE come from? We can let webpack know.</p>

<p>/app/webpack.config.js</p>

<pre><code class="language-js">module.exports = {  
/* ... */
plugins: [  
    new webpack.DefinePlugin({
      MODE: {
        production: process.env.NODE_ENV === 'production'
      }
    })
  ]
}
</code></pre>

<p>Production mode can now be called when declare the <code>NODE_ENV=production</code>.</p>

<pre><code class="language-shell">NODE_ENV=production node node_modules/.bin/webpack-dev-server --content-base app  
</code></pre>

<p>This method can also be used for loading <code>angular-mocks</code> during <code>MODE.test</code>, etc.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Webpack's require gives you a lot more flexibility for building modular apps.</p>

<p>But we're really only scratching the surface of what Webpack can do. Check out the <a href="http://webpack.github.io/docs/">docs</a> for more.</p>

<p>And again, check out the codebase or post any issues on <a href="https://github.com/ShMcK/WebpackAngularDemos">Github</a>. If you have any suggestions or other uses, post a comment below.</p>
            </section>
            <footer class="post-footer">
                <!--<section class="share">-->
                  <!--<a href="https://twitter.com/share?text=Webpack%20%26%20Angular%3A%20Part%203&url=http://localhost:2368/webpack-angular-part-3/"-->
                     <!--onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">-->
                    <!--<i class="fa fa-twitter"></i></a>-->
                <!--</section>-->
            </footer>
                        <div class="bottom-teaser cf">
                <div class="isLeft">
                    <h5 class="index-headline featured"><span>Written by</span></h5>
                    <section class="author">
                        <div class="author-image" style="background-image: url(../content/images/2015/02/header-shawn-2.png)">Blog Logo</div>
                        <h4><a href="../author/shmck/index.html">Shawn McKay</a></h4>
                        <p class="bio"></p>
                        <hr>
                        <p class="published">Published <time datetime="2015-04-15">15 Apr 2015</time></p>
                    </section>
                </div>
            </div>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'shmck'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<div class="bottom-closer">
    <div class="background-closer-image" style="background-image: url(../content/images/2015/03/Mountain-short-dark.jpg)">
        Image
    </div>
    <div class="inner">
        <h1 class="blog-title">ShMcK</h1>
        <h2 class="blog-description">JavaScript Web Dev in Korea</h2>
        <a href="../index.html" class="btn">Back to Overview</a>
    </div>
</div>
</main>


    <script src="../public/jquery.js?v=f842645982"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=f842645982"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=f842645982"></script>
    <script src="../assets/js/readingTime.min.js?v=f842645982"></script>
    <script src="../assets/js/prism.js?v=f842645982"></script>
    <script src="../assets/js/highlight.pack.js?v=f842645982"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <script>
        
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-44377274-2');
      ga('send', 'pageview');
    
    </script>

</body>
</html>
